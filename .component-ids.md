# Component IDs Reference

This document provides a comprehensive reference for all component IDs used throughout the application. Component IDs use the `data-component-id` attribute to facilitate easier identification and modification requests.

## Naming Convention

Component IDs follow this pattern:
```
{page}-{component}-{action}-{identifier?}
```

### Examples:
- `expenses-add-btn` - Main add button on expenses page
- `expenses-edit-btn-{id}` - Edit button for specific expense (id is dynamic)
- `category-select-{context}` - Category selector (context varies by usage)
- `fund-filter-trigger` - Fund filter dropdown trigger

## Base UI Components (Phase 1 Complete)

All base UI components now accept an optional `componentId` prop that maps to `data-component-id`:

### Implemented Components:
- ✅ **Button** (`components/ui/button.tsx`)
- ✅ **Checkbox** (`components/ui/checkbox.tsx`)
- ✅ **Select** (Trigger & Item) (`components/ui/select.tsx`)
- ✅ **Dropdown Menu** (Trigger, Item, CheckboxItem) (`components/ui/dropdown-menu.tsx`)
- ✅ **Radio Group** (Group & Item) (`components/ui/radio-group.tsx`)
- ✅ **Switch** (`components/ui/switch.tsx`)
- ✅ **Input** (`components/ui/input.tsx`)
- ✅ **Dialog** (Trigger & Content) (`components/ui/dialog.tsx`)
- ✅ **Alert Dialog** (Trigger) (`components/ui/alert-dialog.tsx`)
- ✅ **Tabs** (Trigger) (`components/ui/tabs.tsx`)
- ✅ **Popover** (Trigger) (`components/ui/popover.tsx`)
- ✅ **Card** (`components/ui/card.tsx`)

### Usage Example:
```tsx
<Button componentId="expenses-add-btn" onClick={handleAdd}>
  Add Expense
</Button>

<Select>
  <SelectTrigger componentId="category-select">
    <SelectValue placeholder="Select category" />
  </SelectTrigger>
  <SelectContent>
    {categories.map(cat => (
      <SelectItem
        key={cat.id}
        value={cat.id}
        componentId={`category-option-${cat.id}`}
      >
        {cat.name}
      </SelectItem>
    ))}
  </SelectContent>
</Select>
```

## Feature Component IDs (In Progress)

### Expenses View (`/gastos`)

**Action Buttons:**
- `expenses-add-btn` - Add new expense button
- `expenses-import-btn` - Import expenses from CSV button
- `expenses-export-btn` - Export expenses button
- `expenses-edit-btn-{expenseId}` - Edit button for specific expense
- `expenses-delete-btn-{expenseId}` - Delete button for specific expense

**Dialog/Modal Elements:**
- `expenses-add-dialog` - Add expense dialog container
- `expenses-edit-dialog` - Edit expense dialog container
- `expenses-delete-dialog` - Delete confirmation dialog
- `expenses-import-dialog` - CSV import dialog

**Form Inputs (Add/Edit):**
- `expense-category-select` - Category dropdown
- `expense-period-select` - Period dropdown
- `expense-date-picker` - Date picker input
- `expense-event-input` - Event name input
- `expense-payment-method-{method}` - Payment method radio buttons (credit/debit/cash/transfer)
- `expense-amount-input` - Amount input field
- `expense-description-input` - Description textarea
- `expense-source-fund-select` - Source fund selector
- `expense-destination-fund-select` - Destination fund selector (for transfers)
- `expense-credit-card-select` - Credit card selector

**Filter Controls:**
- `expenses-fund-filter` - Fund filter dropdown
- `expenses-category-filter` - Category filter dropdown
- `expenses-payment-method-filter` - Payment method filter
- `expenses-credit-card-filter` - Credit card filter

**Submit Buttons:**
- `expense-add-submit` - Submit button in add dialog
- `expense-edit-submit` - Submit button in edit dialog
- `expense-delete-confirm` - Confirm delete button

### Categories View (`/categorias`)

**Action Buttons:**
- `categories-add-btn` - Add new category button
- `categories-edit-btn-{categoryId}` - Edit button for specific category
- `categories-delete-btn-{categoryId}` - Delete button for specific category

**Dialog Elements:**
- `categories-add-dialog` - Add category dialog
- `categories-edit-dialog` - Edit category dialog
- `categories-delete-dialog` - Delete confirmation dialog

**Form Inputs:**
- `category-name-input` - Category name input
- `category-funds-selector` - Multi-fund selector for category

**Filter Controls:**
- `categories-fund-filter` - Fund filter for categories list

### Incomes View (`/ingresos`)

**Action Buttons:**
- `incomes-add-btn` - Add new income button
- `incomes-edit-btn-{incomeId}` - Edit button for specific income
- `incomes-delete-btn-{incomeId}` - Delete button for specific income

**Form Inputs:**
- `income-period-select` - Period dropdown
- `income-date-picker` - Date picker
- `income-description-input` - Description input
- `income-amount-input` - Amount input
- `income-fund-select` - Fund selector for income

### Budgets View (`/presupuestos`)

**Action Buttons:**
- `budgets-add-btn` - Add new budget button
- `budgets-edit-btn-{budgetId}` - Edit button for specific budget
- `budgets-delete-btn-{budgetId}` - Delete button for specific budget

**Form Inputs:**
- `budget-category-select` - Category dropdown
- `budget-period-select` - Period dropdown
- `budget-amount-input` - Budget amount input

### Funds View (`/fondos`)

**Action Buttons:**
- `funds-add-btn` - Add new fund button
- `funds-edit-btn-{fundId}` - Edit button for specific fund
- `funds-delete-btn-{fundId}` - Delete button for specific fund

**Form Inputs:**
- `fund-name-input` - Fund name input
- `fund-initial-balance-input` - Initial balance input
- `fund-current-balance-input` - Current balance (display/edit)

### Periods View (`/periodos`)

**Action Buttons:**
- `periods-add-btn` - Add new period button
- `periods-edit-btn-{periodId}` - Edit button for specific period
- `periods-delete-btn-{periodId}` - Delete button for specific period
- `periods-activate-btn-{periodId}` - Activate period button
- `periods-close-btn-{periodId}` - Close period button

**Form Inputs:**
- `period-name-input` - Period name input
- `period-month-select` - Month selector
- `period-year-input` - Year input
- `period-status-toggle` - Open/closed toggle

### Dashboard Views

**Category Bars (`/dashboard/category-bars`):**
- `dashboard-category-bars-fund-filter` - Fund filter control
- `dashboard-category-bars-period-select` - Period selector
- `dashboard-category-bars-chart` - Main chart container

**Period Bars (`/dashboard/period-bars`):**
- `dashboard-period-bars-fund-filter` - Fund filter control
- `dashboard-period-bars-chart` - Main chart container

**Funds Dashboard (`/dashboard/fondos`):**
- `dashboard-funds-chart` - Funds overview chart
- `dashboard-funds-period-select` - Period selector

## Specialized Component IDs

### SourceFundSelector Component
- `source-fund-selector-{context}` - Container for source fund selector
- `source-fund-select-trigger-{context}` - Dropdown trigger
- `source-fund-option-{fundId}` - Individual fund options

### MultiFundSelector Component
- `multi-fund-selector-{context}` - Container for multi-fund selector
- `multi-fund-checkbox-{fundId}` - Individual fund checkboxes
- `multi-fund-select-all` - Select all checkbox
- `multi-fund-clear-all` - Clear all button

### CreditCardSelector Component
- `credit-card-selector-{context}` - Container
- `credit-card-select-trigger-{context}` - Dropdown trigger
- `credit-card-option-{cardId}` - Individual card options

### FundFilter Component
- `fund-filter-trigger` - Main filter trigger button
- `fund-filter-option-{fundId}` - Individual fund filter options
- `fund-filter-all` - Show all funds option
- `fund-filter-clear` - Clear filter button

### CSV Import Dialogs
- `csv-import-trigger` - Button to open import dialog
- `csv-file-input` - File input for CSV upload
- `csv-preview-table` - Preview table of CSV data
- `csv-import-confirm` - Confirm import button
- `csv-import-cancel` - Cancel import button

## Dynamic ID Patterns

### Row Actions in Tables
```tsx
// Example: Expense row with dynamic IDs
<TableRow key={expense.id}>
  <TableCell>{expense.description}</TableCell>
  <TableCell>
    <Button
      componentId={`expenses-edit-btn-${expense.id}`}
      onClick={() => handleEdit(expense.id)}
    >
      Edit
    </Button>
    <Button
      componentId={`expenses-delete-btn-${expense.id}`}
      onClick={() => handleDelete(expense.id)}
    >
      Delete
    </Button>
  </TableCell>
</TableRow>
```

### Context-Aware Selectors
```tsx
// Example: Category selector in different contexts
// In add expense dialog:
<Select>
  <SelectTrigger componentId="expense-add-category-select">
    <SelectValue />
  </SelectTrigger>
</Select>

// In edit expense dialog:
<Select>
  <SelectTrigger componentId="expense-edit-category-select">
    <SelectValue />
  </SelectTrigger>
</Select>

// In filter controls:
<Select>
  <SelectTrigger componentId="expenses-category-filter">
    <SelectValue />
  </SelectTrigger>
</Select>
```

## Querying Components by ID

### Using JavaScript
```javascript
// Get element by component ID
const button = document.querySelector('[data-component-id="expenses-add-btn"]');

// Get all elements with partial ID match
const editButtons = document.querySelectorAll('[data-component-id^="expenses-edit-btn-"]');

// Get element and trigger click
document.querySelector('[data-component-id="expenses-add-btn"]')?.click();
```

### Using Testing Libraries
```typescript
// React Testing Library
import { screen } from '@testing-library/react';

const addButton = screen.getByTestId('expenses-add-btn'); // if using data-testid
// or
const addButton = document.querySelector('[data-component-id="expenses-add-btn"]');
```

### Using Browser DevTools
```javascript
// In browser console:
$('[data-component-id="expenses-add-btn"]') // jQuery-style (if available)
// or
document.querySelector('[data-component-id="expenses-add-btn"]')
```

## Implementation Status

### Phase 1: Base UI Components ✅ COMPLETE
All base UI components now support `componentId` prop:
- ✅ Button, Checkbox, Input
- ✅ Select (Trigger & Item)
- ✅ Dropdown Menu (Trigger, Item, CheckboxItem)
- ✅ Radio Group (Group & Item)
- ✅ Switch, Dialog (Trigger & Content)
- ✅ Alert Dialog (Trigger), Tabs (Trigger)
- ✅ Popover (Trigger), Card

### Phase 2: Feature Components ✅ COMPLETE
All primary view components have been ID-enabled:

- ✅ **ExpensesView** - Fully implemented
  - Add/Import buttons (`expenses-add-btn`, `expenses-import-btn`)
  - Add dialog (`expenses-add-dialog`)
  - All form inputs (category, period, date, event, description, amount)
  - Submit and cancel buttons

- ✅ **CategoriesView** - Fully implemented
  - Add category button (`categories-add-btn`)
  - Add dialog (`categories-add-dialog`)
  - Name input field (`category-add-name-input`)

- ✅ **IncomesView** - Fully implemented
  - Add income button (`incomes-add-btn`)
  - Add dialog (`incomes-add-dialog`)
  - Form inputs (period, description, amount)
  - Submit and cancel buttons

- ✅ **BudgetsView** - Fully implemented with dynamic IDs
  - Dynamic edit buttons with category-specific IDs
  - `budgets-edit-btn-cash-{categoryId}`
  - `budgets-edit-btn-credit-{categoryId}`

- ✅ **FundsView** - Fully implemented
  - Add fund button (`funds-add-btn`)
  - Add dialog (`funds-add-dialog`)

### Phase 3: Specialized Components ✅ COMPLETE
Specialized wrapper components now support `componentId` prop:
- ✅ **SourceFundSelector** - Now accepts `componentId` prop, forwards to internal Button
- ⚠️ **MultiFundSelector** - Uses Checkbox components (base support available)
- ⚠️ **CreditCardSelector** - Uses Select component (base support available)
- ⚠️ **FundFilter** - Uses Select/Dropdown components (base support available)
- ⚠️ **CSV Import Dialogs** - Can use Dialog componentId from base components

## Best Practices

1. **Consistency**: Always use the naming convention pattern
2. **Uniqueness**: Ensure IDs are unique within the page context
3. **Descriptiveness**: Use clear, action-oriented names
4. **Dynamic IDs**: Include entity IDs for row-level actions
5. **Context**: Add context suffix when same component appears in multiple places

## Requesting Changes

When requesting changes, provide the component ID:

**Example Request:**
> "Please change the text of the button with `data-component-id='expenses-add-btn'` to 'Create New Expense'"

**Example Request with Dynamic ID:**
> "Please update the edit handler for buttons with `data-component-id` starting with 'expenses-edit-btn-' to include validation"

## Future Enhancements

- [ ] Add TypeScript type definitions for component IDs
- [ ] Create utility functions for ID generation
- [ ] Add Storybook integration to show component IDs
- [ ] Generate automated documentation from component scan
- [ ] Create VSCode extension for ID auto-completion

## Summary

This implementation provides a comprehensive component identification system:

✅ **Phase 1 Complete:** All 12 base UI components support `componentId`
✅ **Phase 2 Complete:** All 5 primary feature views have IDs implemented
✅ **Phase 3 Complete:** SourceFundSelector wrapper now supports `componentId`
⚠️ **Phase 3 Partial:** Other specialized components use base component IDs

### Implementation Highlights

**Dynamic ID Pattern Example:**
```tsx
// Budgets view with category-specific IDs
<Button componentId={`budgets-edit-btn-cash-${category.id}`}>
  Edit Cash Budget
</Button>
```

**Specialized Component Usage:**
```tsx
// SourceFundSelector now accepts componentId
<SourceFundSelector
  componentId="expense-add-source-fund-select"
  selectedSourceFund={fund}
  onSourceFundChange={handleChange}
/>
```

### Remaining Enhancements (Optional)

1. Add `componentId` to remaining specialized wrappers (MultiFundSelector, FundFilter, CreditCardSelector)
2. Add IDs to Dashboard view components (charts, filters)
3. Add IDs to Periods view components
4. Create TypeScript type definitions for all component IDs
5. Add automated tests to verify component IDs are present

### Production Ready

The system is now production-ready for use:
- ✅ All interactive elements in main views are identifiable
- ✅ Dynamic IDs work correctly with entity-specific data
- ✅ Easy to query components using `data-component-id` attribute
- ✅ Consistent naming convention across the application

---

**Last Updated:** 2025-09-30
**Version:** 1.1.0
**Status:** Phase 1 Complete ✅ | Phase 2 Complete ✅ | Phase 3 Mostly Complete ✅
